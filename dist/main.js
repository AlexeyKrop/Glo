(()=>{"use strict";const e=e=>{document.querySelectorAll(".form-btn").forEach((t=>{t.disabled=e}))},t=new class{constructor({main:e,wrap:t,next:o,prev:n,infinity:s=!1,position:i=0,slidesToShow:l=3,responsive:r}){e||t||console.warn('slider-carousel: Необходимо 2 свойства, "main" и "wrap"!'),this.main=document.querySelector(e),this.wrap=document.querySelector(t),this.slides=document.querySelector(t).children,this.next=document.querySelector(o),this.prev=document.querySelector(n),this.slidesToShow=l,this.options={position:i,infinity:s,widthSlide:Math.floor(100/this.slidesToShow),maxPosition:this.slides.length-this.slidesToShow},this.responsive=r}init(){this.addGloClass(),this.addStyle(),this.prev&&this.next||this.addArrow(),this.controlSlider(),this.responsive&&this.responseInit()}addGloClass(){this.main.classList.add("glo-slider"),this.wrap.classList.add("glo-slider__wrap");for(const e of this.slides)e.classList.add("glo-slider__item")}addStyle(){let e=document.getElementById("sliderCarousel-style");e||(e=document.createElement("style"),e.id="sliderCarousel-style"),e.textContent=`\n    .glo-slider {\n      overflow: hidden !important;\n    };\n    .glo-slider__wrap {\n      display: flex !important;\n      transition: transform .5s !important;\n      will-change: transform !important;\n    }\n    .glo-slider__item {\n      display: flex !important;\n      align-items: center !important;\n      justify-content: center !important;\n      flex: 0 0 ${this.options.widthSlide}% !important;\n      margin: auto 0 !important;\n    }\n    `,this.wrap.style.display="flex",document.head.append(e)}controlSlider(){this.prev.addEventListener("click",this.prevSlider.bind(this)),this.next.addEventListener("click",this.nextSlider.bind(this))}prevSlider(){(this.options.infinity||this.options.position>0)&&(--this.options.position,this.options.position<0&&(this.options.position=this.options.maxPosition),this.wrap.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`)}nextSlider(){(this.options.infinity||this.options.position<this.options.maxPosition)&&(++this.options.position,this.options.position>this.options.maxPosition&&(this.options.position=0),this.wrap.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`)}addArrow(){this.prev=document.createElement("button"),this.next=document.createElement("button"),this.prev.className="glo-slider__prev",this.next.className="glo-slider__next",this.main.append(this.prev),this.main.append(this.next);const e=document.createElement("style");e.textContent="\n    .glo-slider__prev,\n    .glo-slider__next {\n        margin: 0 10px;\n        border: 20px solid transparent;\n        background: transparent;\n    }\n    .glo-slider__prev {\n        border-right-color: #19b5fe;\n    }\n    .glo-slider__next {\n        border-left-color: #19b5fe;\n    }\n    .glo-slider__prev:hover,\n    .glo-slider__next:hover,\n    .glo-slider__prev:focus,\n    .glo-slider__next:focus {\n        background: transparent;\n        outline: none;\n    }\n    ",document.head.append(e)}responseInit(){const e=this.slidesToShow,t=this.responsive.map((e=>e.breakpoint)),o=Math.max(...t),n=()=>{this.options.widthSlide=Math.floor(100/this.slidesToShow),this.addStyle()},s=()=>{const s=document.documentElement.clientWidth;if(s<o)for(let e=0;e<t.length;e++)s<t[e]&&(this.slidesToShow=this.responsive[e].slideToShow,n());else this.slidesToShow=e,n()};s(),window.addEventListener("resize",s)}}({main:".companies-wrapper",wrap:".companies-hor",slidesToShow:3,infinity:!0,responsive:[{breakpoint:992,slideToShow:3},{breakpoint:768,slideToShow:2},{breakpoint:576,slideToShow:1}]});setInterval((e=>{const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds");function s(e){return e<10&&(e="0"+e),e}(()=>{let i=(()=>{const s=(new Date).getTime(),i=(new Date(e).getTime()-s)/1e3;return i<0?(clearInterval(void 0),t.textContent="00",t.style.color="red",o.textContent="00",o.style.color="red",n.textContent="00",n.style.color="red",{timeRemaining:i,timerSeconds:n,timerMinutes:o,timeHours:t}):{timeRemaining:i,seconds:Math.floor(i%60),minutes:Math.floor(i/60%60),hours:Math.floor(i/3600)}})();i.timeRemaining>0&&(t.textContent=s(i.hours),o.textContent=s(i.minutes),n.textContent=s(i.seconds))})()}),1e3,"12 april 2021"),(()=>{let e=document.querySelector("main>a>img");document.querySelectorAll("menu>ul>li>a").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const o=e.getAttribute("href").substr(1);document.getElementById(o).scrollIntoView({behavior:"smooth",block:"start"})}))})),e.addEventListener("click",(t=>{t.preventDefault(),e=document.querySelector("main>a");const o=e.getAttribute("href").substr(1);document.getElementById(o).scrollIntoView({behavior:"smooth",block:"start"})}))})(),(()=>{const e=document.querySelector("menu");document.querySelector("body").addEventListener("click",(t=>{let o=t.target;o.closest(".menu")?e.classList.toggle("active-menu"):!o.closest("body")||o.matches("menu")||o.matches("li")||e.classList.remove("active-menu")}))})(),(()=>{const e=document.querySelectorAll(".popup-btn"),t=document.querySelector(".popup"),o=document.querySelector(".popup-content");let n,s=0;const i=()=>{s+=1.5,n=requestAnimationFrame(i),o.style.position="absolute",o.style.left=8*s+"px",s>69&&cancelAnimationFrame(n),document.documentElement.clientWidth<768&&(cancelAnimationFrame(n),o.style.left=document.documentElement.clientWidth/4+"px")};e.forEach((e=>{e.addEventListener("click",(function(){t.style.display="block",i()}))})),t.addEventListener("click",(e=>{let o=e.target;o.classList.contains("popup-close")?(t.style.display="none",s=0):(o=o.closest(".popup-content"),o||(t.style.display="none",s=0))}))})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-tab"),o=e.querySelectorAll(".service-header-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n.classList.contains("service-header-tab")&&o.forEach(((e,s)=>{var i;n===e&&(i=s,t.forEach(((e,n)=>{i===n?(o[n].classList.add("active"),t[n].classList.remove("d-none")):(o[n].classList.remove("active"),t[n].classList.add("d-none"))})))}))}))})(),(()=>{const e=document.querySelector(".portfolio-content"),t=document.querySelectorAll(".portfolio-item");document.querySelectorAll(".portfolio-btn");let o,n=0,s=document.querySelector(".portfolio-dots");(()=>{for(let e=0;e<t.length;e++){let e=document.createElement("li");e.classList.add("dot"),s.append(e)}})();const i=document.querySelectorAll(".dot"),l=(e,t,o)=>{e[t].classList.remove(o)},r=(e,t,o)=>{e[t].classList.add(o)},a=()=>{l(t,n,"portfolio-item-active"),l(i,n,"dot-active"),n++,n>=t.length&&(n=0),r(t,n,"portfolio-item-active"),r(i,n,"dot-active")},c=(e=3e3)=>{o=setInterval(a,e)};e.addEventListener("click",(e=>{e.preventDefault();let o=e.target;o.matches("#arrow-left, #arrow-right, .dot")&&(l(t,n,"portfolio-item-active"),l(i,n,"dot-active"),o.matches("#arrow-left")?(n--,n<0&&(n=t.length-1)):o.matches("#arrow-right")?(n++,n>=t.length&&(n=0)):o.matches(".dot")&&i.forEach(((e,t)=>{o===e&&(n=t)})),r(t,n,"portfolio-item-active"),r(i,n,"dot-active"))})),e.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),e.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&c()})),c(2e3)})(),(()=>{const e=document.getElementById("command");let t;e.addEventListener("mouseover",(e=>{let o=e.target;o.matches("img")&&(t=o.src,o.src=o.dataset.img,o.dataset.img=t)})),e.addEventListener("mouseout",(e=>{let o=e.target;o.matches("img")&&(t=o.src,o.src=o.dataset.img,o.dataset.img=t)}))})(),(()=>{const t=document.querySelectorAll("form");document.querySelectorAll("input").forEach((e=>{e.setAttribute("required",!0)})),t.forEach((t=>{t.addEventListener("input",(t=>{let o=t.target;"Ваше имя"===o.placeholder?o.value=o.value.replace(/[^А-Яа-яЁё\ ]/,""):"Ваше сообщение"===o.placeholder?o.value=o.value.replace(/[^А-Яа-яЁё0-9\.\,\!\?\-\:]/,""):"E-mail"===o.placeholder||"Ваш E-mail"===o.placeholder?(o.value.length>4&&(o.style.border="2px solid green",e(!1)),o.value=o.value.replace(/[^A-Za-z\!.@_~\-'*]/,"")):"Номер телефона"!==o.placeholder&&"Ваш номер телефона"!==o.placeholder||(function(e,t="+7 (___) ___-__-__"){const o=document.querySelectorAll(e);function n(e){const o=e.keyCode,n=t,s=n.replace(/\D/g,""),i=this.value.replace(/\D/g,"");let l=0,r=n.replace(/[_\d]/g,(function(e){return l<i.length?i.charAt(l++)||s.charAt(l):e}));l=r.indexOf("_"),-1!==l&&(r=r.slice(0,l));let a=n.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");a=new RegExp("^"+a+"$"),(!a.test(this.value)||this.value.length<5||o>47&&o<58)&&(this.value=r),"blur"===e.type&&this.value.length<5&&(this.value="")}for(const e of o)e.addEventListener("input",n),e.addEventListener("focus",n),e.addEventListener("blur",n)}(".form-phone"),18===o.value.length&&(o.style.border="2px solid green",e(!1)))}))}))})(),document.querySelectorAll("form").forEach((t=>{t.addEventListener("focusout",(t=>{let o=t.target;"Ваше имя"===o.placeholder?(o.value=o.value.trim().replace(/[^\s\da-zа-я]/gi,"").replace(/\s+/g," "),""!==o.value&&(o.value=o.value.split(" ").map((function(e){return e[0].toUpperCase()+e.substr(1)})).join(" ")),o.value.search(/[^A-Za-z]/)&&(o.value="")):"E-mail"===o.placeholder||"Ваш E-mail"===o.placeholder?(0===o.value.length&&(o.style.border="2px solid red",e(!0)),o.value=o.value.replace(/[^\w\s+\@\ \-]|(.)(?=\1)/gi,"")):"Номер телефона"!==o.placeholder&&"Ваш номер телефона"!==o.placeholder||18!==o.value.length&&(o.style.border="2px solid red",alert("Введите корректный номер телефона"),e(!0))}))})),(e=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),s=document.querySelector(".calc-count"),i=document.querySelector(".calc-day"),l=document.getElementById("total");t.addEventListener("input",(e=>{let t=e.target;t.matches("input")&&(t.value=t.value.replace(/\D+/,""))})),t.addEventListener("change",(t=>{let r=t.target;(r.matches("input")||r.matches("select"))&&(()=>{let t=0,r=1,a=1,c=o.options[o.selectedIndex].value,d=+n.value;""===c&&(i.value="",n.value="",s.value="",l.textContent=0),i.value&&i.value<5?r*=2:i.value&&i.value<10&&(r*=1.5),s.value>1&&(a+=(s.value-1)/10),d&&c&&(t=c*d*e*r*a),t>0&&function(e,t){let o;n.value<100?o=100:n.value>=100&&(o=4e3);let s=0,i=Math.round(.01/(e/o)),l=setInterval((()=>{s+=o,s>=Math.round(e)&&clearInterval(l),t.textContent=s}),i)}(t,l)})()}))})(100),t.init(),(()=>{const e=document.querySelectorAll("form"),t=document.createElement("div");t.style.color="red";const o=document.createElement("img");o.src="./images/load.gif",t.append(o);const n=document.querySelectorAll("input"),s=document.querySelector(".popup");e.forEach((e=>{e.addEventListener("submit",(o=>{o.preventDefault(),e.appendChild(t),t.textContent="Загрузка...";const i=new FormData(e);let l={};i.forEach(((e,t)=>{l[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(l).then((o=>{if(200!==o.status)throw new Error("status network not 200");t.textContent="Спасибо...Мы скоро с вами свяжемся",n.forEach((e=>{e.value=""})),setTimeout((()=>{t.textContent=""}),2e3),e.matches("#form3")&&setTimeout((()=>{s.style.display="none"}),2e3)})).catch((e=>{t.textContent="Что то пошло не так...",console.error(e)}))}))}))})()})();